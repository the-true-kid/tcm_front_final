{"ast":null,"code":"const API_BASE_URL = 'http://localhost:5000';\n\n// Fetches the list of questions\nexport const fetchQuestions = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/questions`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch questions: ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Error fetching questions:', error);\n    throw error;\n  }\n};\nexport const submitAnswers = async (userId, answers) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/answers`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId,\n        answers\n      })\n    });\n    if (!response.ok) {\n      // Log detailed error information from the backend\n      const errorDetails = await response.json();\n      console.error('Backend error details:', errorDetails);\n      throw new Error(`Failed to submit answers: ${response.statusText}`);\n    }\n    const result = await response.json();\n    console.log('Response from backend after submitting answers:', result);\n\n    // Extract and validate the submissionId\n    if (!result.submissionId || typeof result.submissionId !== 'number') {\n      console.error('Invalid submissionId received from backend:', result.submissionId);\n      throw new Error('Invalid submissionId received from backend');\n    }\n    return result.submissionId; // Return submissionId as a primitive value\n  } catch (error) {\n    console.error('Error submitting answers:', error);\n    throw error;\n  }\n};\n\n// Fetches diagnosis results for a given submissionId\nexport const fetchDiagnosisResults = async submissionId => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/diagnosis/${submissionId}`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch diagnosis results: ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Error fetching diagnosis results:', error);\n    throw error;\n  }\n};\n\n// Fetches treatment plan for a given submissionId\nexport const fetchTreatmentPlan = async submissionId => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/treatment-plans/${submissionId}`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch treatment plan: ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Error fetching treatment plan:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["API_BASE_URL","fetchQuestions","response","fetch","ok","Error","statusText","json","error","console","submitAnswers","userId","answers","method","headers","body","JSON","stringify","errorDetails","result","log","submissionId","fetchDiagnosisResults","fetchTreatmentPlan"],"sources":["/Users/aaronweiss/Desktop/tcm app build 2/tcm-app/src/utils/api.js"],"sourcesContent":["const API_BASE_URL = 'http://localhost:5000';\n\n// Fetches the list of questions\nexport const fetchQuestions = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/questions`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch questions: ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Error fetching questions:', error);\n    throw error;\n  }\n};\n\nexport const submitAnswers = async (userId, answers) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/answers`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ userId, answers }),\n    });\n\n    if (!response.ok) {\n      // Log detailed error information from the backend\n      const errorDetails = await response.json();\n      console.error('Backend error details:', errorDetails);\n      throw new Error(`Failed to submit answers: ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    console.log('Response from backend after submitting answers:', result);\n\n    // Extract and validate the submissionId\n    if (!result.submissionId || typeof result.submissionId !== 'number') {\n      console.error('Invalid submissionId received from backend:', result.submissionId);\n      throw new Error('Invalid submissionId received from backend');\n    }\n\n    return result.submissionId; // Return submissionId as a primitive value\n  } catch (error) {\n    console.error('Error submitting answers:', error);\n    throw error;\n  }\n};\n\n\n// Fetches diagnosis results for a given submissionId\nexport const fetchDiagnosisResults = async (submissionId) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/diagnosis/${submissionId}`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch diagnosis results: ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Error fetching diagnosis results:', error);\n    throw error;\n  }\n};\n\n// Fetches treatment plan for a given submissionId\nexport const fetchTreatmentPlan = async (submissionId) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/treatment-plans/${submissionId}`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch treatment plan: ${response.statusText}`);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Error fetching treatment plan:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}